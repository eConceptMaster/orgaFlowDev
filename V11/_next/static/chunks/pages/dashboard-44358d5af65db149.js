(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{87100:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return l(24425)}])},24425:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>h});var a=l(74848),t=l(96540),i=l(93107),n=l(40350),o=l(6861),r=l(18382),d=l(14953);let c=l.n(d)()(()=>Promise.all([l.e(126),l.e(242)]).then(l.bind(l,17242)),{loadableGenerated:{webpack:()=>[17242]},ssr:!1});class x extends t.Component{render(){return(0,a.jsx)("div",{id:"chart",className:"visitors",children:(0,a.jsx)(c,{height:370,options:this.state.options,series:this.state.series,type:"bar"})})}constructor(e){super(e);let{data:s}=this.props,l=[],a=[];s.forEach(e=>{l.push(e.ELEVE_INSCRIT.length),a.push(e.FRAIS)}),this.state={series:[{data:l}],options:{chart:{type:"bar",height:370,toolbar:{show:!1}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:1,colorStops:[{offset:0,color:"#60a5fa",opacity:1},{offset:100,color:"#5a66f1",opacity:1}]}},plotOptions:{bar:{borderRadius:4,horizontal:!0,dataLabels:{position:"bottom"}}},colors:["#5e76a6"],grid:{borderColor:"transparent"},dataLabels:{enabled:!0,textAnchor:"start",offsetX:16},xaxis:{categories:a,axisBorder:{show:!0,color:"rgba(119, 119, 142, 0.1)",offsetX:0,offsetY:0},axisTicks:{show:!0,borderType:"solid",color:"rgba(119, 119, 142, 0.1)",offsetX:0,offsetY:0},labels:{show:!0,rotate:-90,style:{colors:"#adb5be",fontSize:"11px",fontWeight:600}}},yaxis:{labels:{show:!0,style:{colors:"#adb5be",fontSize:"11px",fontWeight:600}}},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return""}}}}}}}}let u=()=>{var e,s,l,d,c,u,h,v,p,f,b,g,m,N,j,y,E;let[S,w]=(0,t.useState)([]),[_,A]=(0,t.useState)(new Date().getFullYear().toString());(0,t.useEffect)(()=>{let e=localStorage.getItem("annee");console.log(e),e&&A(e)},[]);let{result:I,loading:L}=(0,o.s)("/eleves"),T=null!==(e=null==I?void 0:I.error)&&void 0!==e?e:null,C=null!==(s=null==I?void 0:I.data)&&void 0!==s?s:[];if(T){alert(JSON.stringify(null===(l=T.response)||void 0===l?void 0:l.data));return}let{result:O}=(0,o.s)("/facturation/activite/totalbyfrais",!1),k=null!==(d=null==O?void 0:O.data)&&void 0!==d?d:null,F=null!==(c=null==O?void 0:O.error)&&void 0!==c?c:null;if(F){alert(JSON.stringify(null===(u=F.response)||void 0===u?void 0:u.data));return}let{result:R,loading:B}=(0,o.s)("/fraisinscription"),X=null!==(h=null==R?void 0:R.data)&&void 0!==h?h:null,J=null!==(v=null==R?void 0:R.error)&&void 0!==v?v:null;J&&alert(JSON.stringify(null===(p=J.response)||void 0===p?void 0:p.data));let{result:P,loading:Y}=(0,o.s)("/frais/typeFrais/2",!1,{anneescolaire:_,champs:["LIBELLE","FRAIS_ID"]}),z=null!==(f=null==P?void 0:P.data)&&void 0!==f?f:null,D=null!==(b=null==P?void 0:P.error)&&void 0!==b?b:null;return D&&alert(JSON.stringify(null===(g=D.response)||void 0===g?void 0:g.data)),(0,t.useEffect)(()=>{X&&X.length>0&&z&&z.length>0&&function(e,s){let l=s.reduce((e,s)=>(e[String(s.FRAIS_ID)]=s.LIBELLE,e),{});w(Object.values(e.reduce((e,s)=>{let{FRAIS_ID:a,ELEVE_ID:t}=s,i=String(a);if(!e[i]){var n;e[i]={FRAIS:null!==(n=l[i])&&void 0!==n?n:"— Libell\xe9 non trouv\xe9 —",ELEVE_INSCRIT:[]}}return e[i].ELEVE_INSCRIT.push(t),e},{})))}(X,z)},[X,z]),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.A,{title:"Tableau de bord"}),(0,a.jsx)(i.A,{currentpage:"Tableau de bord",activepage:"Tableau de bord",mainpage:""}),(0,a.jsx)("div",{className:"grid grid-cols-12 gap-x-6",children:(0,a.jsxs)("div",{className:"col-span-12 xxxl:col-span-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-x-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-12 xxl:col-span-4",children:(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("div",{className:"box-header",children:(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("i",{className:"ri-bank-line text-3xl absolute"}),(0,a.jsx)("div",{className:"text-base font-semibold pl-12",children:(0,a.jsx)("p",{children:"Situation financi\xe8re"})})]})}),(0,a.jsx)("div",{className:"box-body py-6 px-2 ",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"badge bg-info/10 text-info",children:"Montant total"}),(0,a.jsxs)("span",{className:"badge bg-info/10 text-info",children:[null!==(m=null==k?void 0:k.COUT_TOTAL)&&void 0!==m?m:0," "," €"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"badge bg-info/10 text-info",children:"Montant per\xe7u"}),(0,a.jsxs)("span",{className:"badge bg-info/10 text-info",children:[null!==(N=null==k?void 0:k.MONTANT_PAYE)&&void 0!==N?N:0," "," €"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"badge ".concat(null===(j=null==k?void 0:k.BALANCE)||void 0===j||j?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:"Balance"}),(0,a.jsxs)("span",{className:"badge ".concat(null===(y=null==k?void 0:k.BALANCE)||void 0===y||y?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:[null!==(E=null==k?void 0:k.BALANCE)&&void 0!==E?E:0," "," €"]})]})]})})]})}),(0,a.jsx)("div",{className:"col-span-12 md:col-span-6 xxl:col-span-3",children:(0,a.jsx)("div",{className:"box",children:(0,a.jsx)("div",{className:"box-body",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[L&&(0,a.jsx)(r.mH,{}),!L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"",children:(0,a.jsx)("i",{className:"ri-user-line text-xl avatar w-10 h-10 rounded-full p-2.5 bg-secondary/10 text-secondary leading-none"})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"flex mb-2 items-start justify-between",children:(0,a.jsx)("h5",{className:"text-xl font-semibold mb-0 leading-none",children:C&&C.length})}),(0,a.jsx)("p",{className:"mb-0 text-xs leading-none opacity-70 text-gray-500 dark:text-white/70",children:C&&C.length>1?"Enfants enregistrés":"Enfant enregistré"})]})]})]})})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-12 gap-x-6",children:(0,a.jsx)("div",{className:"col-span-12 lg:col-span-6 xxl:col-span-7",children:(0,a.jsxs)("div",{className:"box social-visitors",children:[(0,a.jsx)("div",{className:"box-header",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("h5",{className:"box-title my-auto",children:"Statistique d'inscription"})})}),(0,a.jsx)("div",{className:"box-body p-1",children:!Y&&!B&&S.length>0&&(0,a.jsx)(x,{data:S})})]})})})]})})]})};u.layout="Contentlayout";let h=u}},e=>{var s=s=>e(e.s=s);e.O(0,[374,718,923,636,593,792],()=>s(87100)),_N_E=e.O()}]);