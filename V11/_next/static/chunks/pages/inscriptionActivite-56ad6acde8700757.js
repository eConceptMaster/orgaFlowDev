(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{18668:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/inscriptionActivite",function(){return l(29729)}])},29729:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var s=l(74848),a=l(96540),r=l(40350),i=l(93107),n=l(18322),o=l(6861),d=l(18382);let c=()=>{var e,t,l;let[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!0),[v,b]=(0,a.useState)(!0),[N,p]=(0,a.useState)(!1),[g,j]=(0,a.useState)(0),[w,y]=(0,a.useState)([]),[E,C]=(0,a.useState)(null),[k,I]=(0,a.useState)([]),[_,S]=(0,a.useState)(0),[L,O]=(0,a.useState)([]),[R,M]=(0,a.useState)([]),[D,A]=(0,a.useState)("2025"),V=(0,a.useRef)(null),P=(0,a.useRef)(null),F=async()=>{var e,t;m(!0),P.current&&(P.current.classList.add("open"),P.current.classList.remove("hidden"));let{result:l,loading:s}=await (0,n.Fd)("/eleves",!1,{champs:["NOM","PRENOM"]});b(s);let a=null!==(e=null==l?void 0:l.data)&&void 0!==e?e:null,r=null!==(t=null==l?void 0:l.error)&&void 0!==t?t:null;r&&console.error(r),M(null==a?void 0:a.filter(e=>!w.includes(Number(e.ELEVE_ID))))},J=()=>{m(!1),P.current&&(P.current.classList.remove("open"),P.current.classList.add("hidden"))},T=async(e,t)=>{let{data:l,error:s}=await (0,n.Wv)("/fraisinscription/".concat(e));if(s){var a;alert(JSON.stringify(null===(a=s.response)||void 0===a?void 0:a.data));return}let r=L.filter(e=>e.ELEVE_ID!==Number(t.ELEVE_ID));O(r),M([...R,t].sort((e,t)=>e.NOM.localeCompare(t.NOM))),y(w.filter(e=>e!==Number(t.ELEVE_ID))),I(t=>t.filter(t=>t!==e)),0===r.length&&u(!1)},U=async e=>{var t,l,s,a,r,i,o;J(),p(!0),j(e),f(!0);let{result:d}=await (0,n.Fd)("/fraisinscription/frais/".concat(e)),c=null!==(t=null==d?void 0:d.data)&&void 0!==t?t:null,h=null!==(l=null==d?void 0:d.error)&&void 0!==l?l:null;if(h){alert(JSON.stringify(null===(s=h.response)||void 0===s?void 0:s.data));return}null==c||c.map(e=>{I(t=>[...t,Number(e.FRAIS_INSCRIPTION_ID)])});let m=null!==(a=null==c?void 0:c.map(e=>e.ELEVE_ID))&&void 0!==a?a:[];if(0===m.length){u(!1),f(!1),y([]);return}y(m);let{result:x,loading:v}=await (0,n.Fd)("/eleves",!1,{IDs:m,champs:["NOM","PRENOM"]}),b=null!==(r=null==x?void 0:x.data)&&void 0!==r?r:null,N=null!==(i=null==x?void 0:x.error)&&void 0!==i?i:null;if(N){alert(JSON.stringify(null===(o=N.response)||void 0===o?void 0:o.data));return}f(v),u(!0),O(null!=b?b:[])},z=async e=>{0===w.length?O([e]):O(t=>[...t,e].sort((e,t)=>e.NOM.localeCompare(t.NOM))),0===w.length?y([Number(e.ELEVE_ID)]):y(t=>[...t,Number(e.ELEVE_ID)]),M(t=>t.filter(t=>t.ELEVE_ID!==Number(e.ELEVE_ID))),u(!0);let t={ELEVE_ID:Number(e.ELEVE_ID),FRAIS_ID:g},{data:l,error:s}=await (0,n.sS)("/fraisinscription/",!1,t);l&&console.log(l),s&&console.error(s),I(e=>[...e,null==l?void 0:l.FRAIS_INSCRIPTION_ID])};(0,a.useEffect)(()=>{let e=localStorage.getItem("annee");console.log(e),e&&A(e)},[]);let{result:B,loading:X}=(0,o.s)("/frais/typefrais/2",!1,{AnneeScolaire:D}),q=null!==(e=null==B?void 0:B.data)&&void 0!==e?e:null,G=null!==(t=null==B?void 0:B.error)&&void 0!==t?t:null;if(G){alert(JSON.stringify(null===(l=G.response)||void 0===l?void 0:l.data));return}return(0,s.jsxs)("div",{children:[(0,s.jsx)(r.A,{title:"Inscription aux activit\xe9s"}),(0,s.jsx)(i.A,{currentpage:"Inscription aux activit\xe9s",mainpage:"Inscription aux activit\xe9s",activepage:"Gestion des activit\xe9s"}),(0,s.jsx)("div",{id:"modalRemoveChild",className:"hs-overlay hidden ti-modal",children:(0,s.jsx)("div",{className:"hs-overlay-open:mt-7 ti-modal-box mt-0 ease-out min-h-[calc(100%-3.5rem)] flex items-center",children:(0,s.jsxs)("div",{className:"ti-modal-content",children:[(0,s.jsxs)("div",{className:"ti-modal-header",children:[(0,s.jsx)("h3",{className:"ti-modal-title",children:" Supprimer cet enfant"}),(0,s.jsxs)("button",{type:"button",className:"hs-dropdown-toggle ti-modal-close-btn","data-hs-overlay":"#modalRemoveChild",children:[(0,s.jsx)("span",{className:"sr-only",children:"Close"}),(0,s.jsx)("svg",{className:"w-3.5 h-3.5",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z",fill:"currentColor"})})]})]}),(0,s.jsx)("div",{className:"ti-modal-body",children:(0,s.jsx)("p",{className:"text-gray-800 dark:text-white/70",children:"Voulez-vous supprimer ".concat(null==E?void 0:E.NOM," ").concat(null==E?void 0:E.PRENOM)})}),(0,s.jsxs)("div",{className:"ti-modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"hs-dropdown-toggle ti-btn ti-border font-medium bg-danger/10 text-danger shadow-sm align-middle hover:bg-danger/30 focus:ring-offset-white focus:ring-primary","data-hs-overlay":"#modalRemoveChild",onClick:()=>{T(_,E)},children:"Supprimer"}),(0,s.jsx)("button",{type:"button",className:"hs-dropdown-toggle ti-btn ti-border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:ring-offset-white focus:ring-primary dark:bg-bgdark dark:hover:bg-black/20 dark:border-white/10 dark:text-white/70 dark:hover:text-white dark:focus:ring-offset-white/10","data-hs-overlay":"#modalRemoveChild",children:"Annuler"})]})]})})}),(0,s.jsxs)("div",{className:"sm:grid space-y-6 sm:space-y-0 gap-4 font-mono text-white text-sm text-center font-bold \n          ".concat(h?"grid-cols-3":"grid-cols-2"),children:[(0,s.jsxs)("div",{className:"box mb-0",children:[(0,s.jsx)("div",{className:"box-header",children:(0,s.jsx)("h5",{className:"box-title text-left",children:"Liste des activit\xe9s"})}),(0,s.jsxs)("div",{className:"box-body h-[600px] overflow-y-auto",children:[X&&(0,s.jsx)(d._N,{}),!X&&(0,s.jsx)("ul",{className:"w-full flex flex-col",children:null==q?void 0:q.map(e=>(0,s.jsx)("li",{className:"ti-list-group gap-x-3.5 bg-white text-gray-800 dark:bg-bgdark \n                                dark:border-white/10 dark:text-white\n                                ".concat(g===e.FRAIS_ID?"!bg-primary text-white":""),onClick:()=>U(e.FRAIS_ID),children:e.LIBELLE},e.FRAIS_ID))})]})]}),(0,s.jsxs)("div",{className:"box ",children:[(0,s.jsx)("div",{className:"box-header",children:(0,s.jsx)("h5",{className:"box-title text-left",children:"Liste des enfants"})}),x&&N&&(0,s.jsx)("div",{className:"box-body",children:(0,s.jsx)(d._N,{})}),!x&&(0,s.jsxs)("div",{className:c?"box-body h-[600px] overflow-y-auto":"box-body flex items-center justify-center",children:[!c&&(0,s.jsxs)("button",{className:"ti-btn !rounded-full ti-btn-outline ti-btn-outline-info",onClick:F,children:[(0,s.jsx)("i",{className:"ri-user-add-line text-4xl"}),(0,s.jsx)("span",{children:"Ajouter des enfants"})]}),c&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("button",{className:"ti-btn !rounded-full ti-btn-outline ti-btn-outline-info mb-6 w-48",onClick:F,children:[(0,s.jsx)("i",{className:"ri-user-add-line"}),(0,s.jsx)("span",{children:"Ajouter des enfants"})]}),(0,s.jsx)("ul",{className:"flex flex-col gap-3",children:L.map((e,t)=>(0,s.jsxs)("li",{className:"ti-list-group gap-x-3.5 bg-white text-gray-800 dark:bg-bgdark dark:border-white/10 dark:text-white flex items-center justify-between w-full",children:[(0,s.jsxs)("span",{children:[e.NOM," ",e.PRENOM]}),(0,s.jsx)("button",{type:"button","data-hs-overlay":"#modalRemoveChild",className:"text-xl hs-dropdown-toggle",onClick:()=>{C(e),S(k[t])},children:(0,s.jsx)("i",{className:"ri-delete-bin-line"})})]},e.ELEVE_ID))})]})]})]}),(0,s.jsxs)("div",{className:"hidden my-offcanvas my-offcanvas-right",tabIndex:-1,ref:P,children:[(0,s.jsxs)("div",{className:"my-offcanvas-header flex-col !p-0",children:[(0,s.jsxs)("div",{className:"w-full flex items-center justify-between p-3",children:[(0,s.jsx)("h3",{className:"my-offcanvas-title",children:"Liste des enfants"}),(0,s.jsxs)("button",{type:"button",className:"ti-btn flex-shrink-0 h-8 w-8 !p-0 transition-none text-gray-500 hover:text-gray-700 focus:ring-gray-400 focus:ring-offset-white dark:text-white/70 dark:hover:text-white/80 dark:focus:ring-white/10 dark:focus:ring-offset-white/10",onClick:J,children:[(0,s.jsx)("span",{className:"sr-only",children:"Close modal"}),(0,s.jsx)("i",{className:"ri-close-line text-2xl"})]})]}),(0,s.jsx)("input",{onChange:e=>{let t=e.target.value,l=(0,n.eV)(t);V.current&&V.current.querySelectorAll("li").forEach(e=>{let t=(0,n.eV)(e.textContent||"");e.style.display=t.includes(l)?"block":"none"})},placeholder:"Rerchercher...",type:"text",className:"ti-form-input rounded-none !border-b-0 !border-l-0 !border-r-0 focus:z-10 w-full text-gray-800 dark:text-white/70"})]}),(0,s.jsxs)("div",{className:"my-offcanvas-body !p-0",children:[v&&(0,s.jsx)(d._N,{}),!v&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("ul",{className:"flex flex-col",ref:V,children:null==R?void 0:R.map((e,t)=>{var l,a;return 0===t?(0,s.jsx)("li",{className:"ti-list-group bg-white text-gray-800 dark:bg-bgdark dark:border-white/10 dark:text-white border-t-0 border-x-0",children:(0,s.jsxs)("button",{type:"button",className:"flex items-center w-full",onClick:()=>z(e),children:[(0,s.jsx)("div",{className:"ltr:mr-2 rtl:ml-2",children:(0,s.jsx)("span",{className:"inline-flex items-center justify-center avatar avatar-sm bg-primary text-white rounded-full",children:"".concat(e.NOM.charAt(0).toUpperCase()).concat(null===(l=e.PRENOM)||void 0===l?void 0:l.charAt(0).toUpperCase())})}),(0,s.jsx)("p",{className:"font-semibold mb-0",children:"".concat(e.NOM," ").concat(e.PRENOM)})]})},t):(0,s.jsx)("li",{className:"ti-list-group bg-white text-gray-800 dark:bg-bgdark dark:border-white/10 dark:text-white border-x-0",children:(0,s.jsxs)("button",{type:"button",className:"flex items-center w-full",onClick:()=>z(e),children:[(0,s.jsx)("div",{className:"ltr:mr-2 rtl:ml-2",children:(0,s.jsx)("span",{className:"inline-flex items-center justify-center avatar avatar-sm bg-primary text-white rounded-full",children:"".concat(e.NOM.charAt(0).toUpperCase()).concat(null===(a=e.PRENOM)||void 0===a?void 0:a.charAt(0).toUpperCase())})}),(0,s.jsx)("p",{className:"font-semibold mb-0",children:"".concat(e.NOM," ").concat(e.PRENOM)})]})},t)})})})]})]})]})]})};c.layout="Contentlayout";let u=c}},e=>{var t=t=>e(e.s=t);e.O(0,[374,718,923,636,593,792],()=>t(18668)),_N_E=e.O()}]);