"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{71416:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var s=t(74848),l=t(96540),i=t(59386),n=t.n(i);t(77571);var r=t(94335),c=t(18987),d=t(19500),o=t(20757);let m=e=>{let{namePage:a,isActif:t,mainPage:i,isChecking:m,setInfoChecking:E,idUser:N}=e,[u,h]=(0,l.useState)(0),[b,p]=(0,l.useState)(""),[A,g]=(0,l.useState)(!1),[x,S]=(0,l.useState)(),[y,R]=(0,l.useState)([]),[I,O]=(0,l.useState)({MAIL:"",TELEPHONE:"",PASSWORD:"",TYPE_USER:0,FLAG_MAIL_VERIFIED:0,FLAG_TELEPHONE_VERIFIED:0,DATETIME_CREATION:"",CODE_PIN:0,REGISTRE_NATIONAL:"",NOM:"",PRENOM:"",DATE_NAISSANCE:""}),[T,j]=(0,l.useState)({MAIL:"",TELEPHONE:"",PASSWORD:"",NOM:"",PRENOM:"",DATE_NAISSANCE:"",REGISTRE_NATIONAL:"",TYPE_USER:""}),C=(e,s)=>{t(!1),a(e),i(s),E(!1)},f=async()=>{try{let e={"X-Embarcadero-Tenant-Id":c.A.get("tenant-id"),"X-Embarcadero-Tenant-Secret":c.A.get("tenant-secret"),Secret:c.A.get("secret")},a=c.A.get("ip"),t={...I,ID:N},s=await r.A.patch("".concat(a,"/compteutilisateur/"),t,{headers:e});200===s.status&&(j(e=>({...e,MAIL:I.MAIL,TELEPHONE:I.TELEPHONE,PASSWORD:I.PASSWORD,NOM:I.NOM,PRENOM:I.PRENOM,REGISTRE_NATIONAL:T.REGISTRE_NATIONAL,TYPE_USER:b,DATE_NAISSANCE:I.DATE_NAISSANCE})),g(!1))}catch(e){console.error(e)}},v=async()=>{try{let e={"X-Embarcadero-Tenant-Id":c.A.get("tenant-id"),"X-Embarcadero-Tenant-Secret":c.A.get("tenant-secret"),Secret:c.A.get("secret")},a=c.A.get("ip"),t=await r.A.delete("".concat(a,"/compteutilisateur/").concat(N),{headers:e});200===t.status&&setTimeout(()=>C("Utilisateurs",""),50)}catch(e){console.error(e)}},L=(e,a)=>{let t=(0,d.W)(a.find(a=>a.ID_REFERENCE===String(e.TYPE_USER)).LIBELLE_REFERENCE);j({MAIL:e.MAIL,TELEPHONE:e.TELEPHONE,PASSWORD:e.PASSWORD,NOM:e.NOM,PRENOM:e.PRENOM,REGISTRE_NATIONAL:e.REGISTRE_NATIONAL,DATE_NAISSANCE:"",TYPE_USER:t}),p(t),void 0!==e.DATE_NAISSANCE&&S(new Date(e.DATE_NAISSANCE))},M=e=>{p(e.target.value),O(a=>({...a,TYPE_USER:Number(e.target.selectedOptions[0].dataset.type)})),h(Number(e.target.selectedOptions[0].dataset.type))},_=(e,a)=>{if(e){let{name:a,value:t}=e.target;O(e=>({...e,[a]:t}))}a&&(O(e=>({...e,DATE_NAISSANCE:a.toISOString()})),S(a))},P=async e=>{e.preventDefault(),O(e=>({...e,DATETIME_CREATION:new Date().toISOString()}));try{let e={"X-Embarcadero-Tenant-Id":c.A.get("tenant-id"),"X-Embarcadero-Tenant-Secret":c.A.get("tenant-secret"),Secret:c.A.get("secret")},a=c.A.get("ip"),t=await r.A.put("".concat(a,"/compteutilisateur/interne"),I,{headers:e});200===t.status&&(O({MAIL:"",TELEPHONE:"",PASSWORD:"",TYPE_USER:0,FLAG_MAIL_VERIFIED:0,FLAG_TELEPHONE_VERIFIED:0,DATETIME_CREATION:"",CODE_PIN:0,REGISTRE_NATIONAL:"",NOM:"",PRENOM:"",DATE_NAISSANCE:""}),p("Demo"),S(void 0))}catch(e){console.log(e)}};return(0,l.useEffect)(()=>{(async()=>{try{let e={"X-Embarcadero-Tenant-Id":c.A.get("tenant-id"),"X-Embarcadero-Tenant-Secret":c.A.get("tenant-secret"),Secret:c.A.get("secret")},a=c.A.get("ip"),t=await r.A.get("".concat(a,"/listtype"),{headers:e}),s=await r.A.get("".concat(a,"/compteutilisateur/").concat(N),{headers:e});m&&L(s.data,t.data),R(t.data)}catch(e){console.error(e)}})()},[]),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"grid grid-cols-12 gap-6",children:(0,s.jsx)("div",{className:"col-span-12",children:(0,s.jsxs)("div",{className:"box",children:[(0,s.jsx)("div",{className:"box-header",children:(0,s.jsxs)("button",{type:"button",className:"ti-btn !rounded-full ti-btn-outline-info",onClick:()=>C("Utilisateurs",""),children:[(0,s.jsx)("i",{className:"ti ti-arrow-back font-bold"}),"Retour"]})}),(0,s.jsxs)("div",{className:"box-body",children:[!m&&(0,s.jsxs)("form",{className:"ti-validation",onSubmit:P,children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Nom"}),(0,s.jsx)("input",{type:"text",className:"my-auto ti-form-input",name:"NOM",value:I.NOM,onChange:_,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Prenom"}),(0,s.jsx)("input",{type:"text",className:"my-auto ti-form-input",name:"PRENOM",value:I.PRENOM,onChange:_})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"number",className:"my-auto ti-form-input",name:"TELEPHONE",value:I.TELEPHONE,onChange:_})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Mail"}),(0,s.jsx)("input",{type:"email",className:"my-auto ti-form-input",name:"MAIL",value:I.MAIL,onChange:_})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",className:"ti-form-input",name:"PASSWORD",value:I.PASSWORD,onChange:_,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2 date-of-birth",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Date de naissance"}),(0,s.jsx)(n(),{className:"ti-form-input",name:"DATE_NAISSANCE",showIcon:!0,locale:o.A,dateFormat:"dd/MM/yyyy",selected:x,onChange:e=>_(void 0,e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Registre national"}),(0,s.jsx)("input",{type:"text",name:"REGISTRE_NATIONAL",onChange:_,value:I.REGISTRE_NATIONAL,className:"my-auto ti-form-input",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Type d'utilisateur"}),(0,s.jsxs)("select",{name:"TYPE_USER",className:"my-auto ti-form-input",value:b,onChange:M,required:!0,children:[y.map(e=>(0,s.jsx)("option",{"data-type":e.ID_REFERENCE,children:(0,d.W)(e.LIBELLE_REFERENCE)},e.ID_REFERENCE)),";"]})]})]}),!m&&(0,s.jsx)("button",{type:"submit",className:"mt-4 ti-btn ti-btn-primary",children:"Cr\xe9er"}),m&&(0,s.jsx)("button",{type:"submit",className:"mt-4 ti-btn ti-btn-warning",children:"Editer"}),m&&(0,s.jsx)("button",{type:"submit",className:"mt-4 ti-btn ti-btn-danger",children:"Supprimer"})]}),m&&(0,s.jsxs)("form",{className:"ti-validation",onSubmit:P,children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Nom"}),(0,s.jsx)("input",{type:"text",className:"my-auto ti-form-input",name:"NOM",value:A?I.NOM:T.NOM,onChange:_,readOnly:!A,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Pr\xe9nom"}),(0,s.jsx)("input",{type:"text",className:"my-auto ti-form-input",name:"PRENOM",value:A?I.PRENOM:T.PRENOM,onChange:_,readOnly:!A})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"number",className:"my-auto ti-form-input",name:"TELEPHONE",value:A?I.TELEPHONE:T.TELEPHONE,onChange:_,readOnly:!A,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Mail"}),(0,s.jsx)("input",{type:"email",className:"my-auto ti-form-input",name:"MAIL",value:A?I.MAIL:T.MAIL,onChange:_,readOnly:!A,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",className:"ti-form-input",name:"PASSWORD",value:A?I.PASSWORD:T.PASSWORD,onChange:_,readOnly:!A,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2 date-of-birth",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Date de naissance"}),(0,s.jsx)(n(),{className:"ti-form-input",name:"DATE_NAISSANCE",showIcon:!0,locale:o.A,dateFormat:"dd/MM/yyyy",selected:x,readOnly:!A,onChange:e=>_(void 0,e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Registre national"}),(0,s.jsx)("input",{type:"text",name:"REGISTRE_NATIONAL",onChange:_,value:T.REGISTRE_NATIONAL,readOnly:!A,className:"my-auto ti-form-input",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"ti-form-label mb-0",children:"Type d'utilisateur"}),(0,s.jsxs)("select",{name:"TYPE_USER",className:"my-auto ti-form-input",value:b,onChange:M,disabled:!A,required:!0,children:[y.map(e=>(0,s.jsx)("option",{"data-type":e.ID_REFERENCE,children:(0,d.W)(e.LIBELLE_REFERENCE)},e.ID_REFERENCE)),";"]})]})]}),!m&&(0,s.jsx)("button",{type:"submit",className:"mt-4 ti-btn ti-btn-primary",children:"Cr\xe9er"}),m&&!A&&(0,s.jsx)("button",{type:"button",className:"mt-4 ti-btn ti-btn-warning",onClick:()=>{g(!0),O(e=>({...e,MAIL:T.MAIL,TELEPHONE:T.TELEPHONE,PASSWORD:T.PASSWORD,NOM:T.NOM,PRENOM:T.PRENOM,DATE_NAISSANCE:T.DATE_NAISSANCE,REGISTRE_NATIONAL:T.REGISTRE_NATIONAL,TYPE_USER:u}))},children:"Editer"}),m&&!A&&(0,s.jsx)("button",{type:"button",className:"mt-4 ti-btn ti-btn-danger","data-hs-overlay":"#deleteModal",children:"Supprimer"}),A&&(0,s.jsx)("button",{type:"button",className:"mt-4 ti-btn ti-btn-success",onClick:f,children:"Valider"}),A&&(0,s.jsx)("button",{type:"submit",className:"hs-dropdown-toggle ti-btn ti-border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:ring-offset-white focus:ring-primary dark:bg-bgdark dark:hover:bg-black/20 dark:border-white/10 dark:text-white/70 dark:hover:text-white dark:focus:ring-offset-white/10",onClick:()=>{g(!1)},children:"Annuler"})]}),(0,s.jsx)("div",{id:"deleteModal",className:"hs-overlay hidden ti-modal",children:(0,s.jsx)("div",{className:"hs-overlay-open:mt-7 ti-modal-box mt-0 ease-out",children:(0,s.jsxs)("div",{className:"ti-modal-content",children:[(0,s.jsxs)("div",{className:"ti-modal-header",children:[(0,s.jsx)("h3",{className:"ti-modal-title",children:"Suppression de compte"}),(0,s.jsxs)("button",{type:"button",className:"hs-dropdown-toggle ti-modal-close-btn","data-hs-overlay":"#deleteModal",children:[(0,s.jsx)("span",{className:"sr-only",children:"Close"}),(0,s.jsx)("svg",{className:"w-3.5 h-3.5",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z",fill:"currentColor"})})]})]}),(0,s.jsx)("div",{className:"ti-modal-body",children:(0,s.jsx)("p",{className:"mt-1 text-gray-800 dark:text-white/70",children:"\xcates-vous s\xfbr de vouloir supprimer ce compte ?"})}),(0,s.jsxs)("div",{className:"ti-modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"hs-dropdown-toggle ti-btn ti-btn-danger bg-danger font-medium shadow-sm align-middle hover:bg-danger/80 focus:ring-offset-white focus:ring-danger dark:bg-danger dark:hover:bg-danger/80 dark:focus:ring-offset-white/10","data-hs-overlay":"#deleteModal",onClick:v,children:"Supprimer"}),(0,s.jsx)("button",{type:"button",className:"hs-dropdown-toggle ti-btn ti-border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:ring-offset-white focus:ring-primary dark:bg-bgdark dark:hover:bg-black/20 dark:border-white/10 dark:text-white/70 dark:hover:text-white dark:focus:ring-offset-white/10","data-hs-overlay":"#deleteModal",children:"Annuler"})]})]})})})]})]})})})})};m.layout="Contentlayout";let E=m},19500:(e,a,t)=>{t.d(a,{W:()=>s,Y:()=>l});let s=e=>"".concat(e[0]).concat(e.slice(1).toLowerCase()),l=e=>{let a=new Date(e);return"".concat(a.getDate(),"/").concat(a.getMonth()+1,"/").concat(a.getFullYear())}}}]);